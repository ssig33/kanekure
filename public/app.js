/*
 * jQuery.BgSwitcher
 *
 * @version  0.4.3
 * @author   rewish <rewish.org@gmail.com>
 * @license  MIT License (https://github.com/rewish/jquery-bgswitcher/blob/master/LICENSE.md)
 * @link     https://github.com/rewish/jquery-bgswitcher
 */
!function(a){"use strict";function g(b){this.$el=a(b),this.index=0,this.config=a.extend({},g.defaultConfig),this._setupBackgroundElement(),this._listenToResize()}var b={},c=Array.prototype.slice,d=Object.prototype.toString,e=["Top","Right","Bottom","Left"],f=["Attachment","Color","Image","Repeat","Position","Size","Clip","Origin"];a.fn.bgswitcher=function(){var b=arguments,c=g.keys.instance;return this.each(function(){var d=a.data(this,c);d||(d=new g(this),a.data(this,c,d)),d.dispatch.apply(d,b)})},a.fn.bgSwitcher=a.fn.bgswitcher,a.extend(g.prototype,{dispatch:function(a){switch(d.call(a)){case"[object Object]":this.setConfig(a);break;case"[object String]":this[a].apply(this,c.call(arguments,1));break;default:throw new Error("Please specify a Object or String")}},setConfig:function(b){this.config=a.extend(this.config,b),"undefined"!=typeof this.config.random&&(this.config.shuffle=this.config.random),this.refresh()},setImages:function(a){this.imageList=new this.constructor.ImageList(a),this.config.shuffle&&this.imageList.shuffle()},setSwitchHandler:function(b){this.switchHandler=a.proxy(b,this)},getBuiltInSwitchHandler:function(a){return this.constructor.switchHandlers[a||this.config.effect]},refresh:function(){this.setImages(this.config.images),this.setSwitchHandler(this.getBuiltInSwitchHandler()),this._prepareSwitching(),this.config.start&&this.start()},start:function(){this._timerID||(this._timerID=setTimeout(a.proxy(this,"next"),this.config.interval))},stop:function(){this._timerID&&(clearTimeout(this._timerID),this._timerID=null)},toggle:function(){this._timerID?this.stop():this.start()},reset:function(){this.index=0,this._prepareSwitching()},next:function(){var a=this.imageList.count();(this.config.loop||this.index+1!==a)&&(++this.index===a&&(this.index=0),this.switching())},prev:function(){(this.config.loop||0!==this.index)&&(--this.index===-1&&(this.index=this.imageList.count()-1),this.switching())},select:function(a){a===-1&&(a=this.imageList.count()-1),this.index=a,this.switching()},switching:function(){var a=!!this._timerID;a&&this.stop(),this._createSwitchableElement(),this._prepareSwitching(),this.switchHandler(this.$switchable),a&&this.start()},destroy:function(){this.stop(),this._stopListeningToResize(),this.$switchable&&(this.$switchable.stop(),this.$switchable.remove(),this.$switchable=null),this.$bg&&(this.$bg.remove(),this.$bg=null),this.$el.removeAttr("style"),this.$el.removeData(this.constructor.keys.instance),this.$el=null},_adjustRectangle:function(){for(var a,b=0,c=e.length,d=this.$el.position(),f={top:d.top,left:d.left,width:this.$el.innerWidth(),height:this.$el.innerHeight()};b<c;b++)a=e[b],f["margin"+a]=this.$el.css("margin"+a),f["border"+a]=this.$el.css("border"+a);this.$bg.css(f)},_setupBackgroundElement:function(){this.$bg=a(document.createElement("div")),this.$bg.css({position:"absolute",zIndex:(parseInt(this.$el.css("zIndex"),10)||0)-1,overflow:"hidden"}),this._copyBackgroundStyles(),this._adjustRectangle(),"BODY"===this.$el[0].tagName?this.$el.prepend(this.$bg):(this.$el.before(this.$bg),this.$el.css("background","none"))},_createSwitchableElement:function(){this.$switchable&&this.$switchable.remove(),this.$switchable=this.$bg.clone(),this.$switchable.css({top:0,left:0,margin:0,border:"none"}),this.$switchable.appendTo(this.$bg)},_copyBackgroundStyles:function(){for(var a,b={},c=0,d=f.length,e="backgroundPosition";c<d;c++)a="background"+f[c],b[a]=this.$el.css(a);void 0===b[e]&&(b[e]=[this.$el.css(e+"X"),this.$el.css(e+"Y")].join(" ")),this.$bg.css(b)},_listenToResize:function(){var b=this;this._resizeHandler=function(){b._adjustRectangle()},a(window).on("resize",this._resizeHandler)},_stopListeningToResize:function(){a(window).off("resize",this._resizeHandler),this._resizeHandler=null},_prepareSwitching:function(){this.$bg.css("backgroundImage",this.imageList.url(this.index))}}),g.keys={instance:"bgSwitcher"},g.defaultConfig={images:[],interval:5e3,start:!0,loop:!0,shuffle:!1,effect:"fade",duration:1e3,easing:"swing"},g.switchHandlers={fade:function(a){a.animate({opacity:0},this.config.duration,this.config.easing)},blind:function(a){a.animate({height:0},this.config.duration,this.config.easing)},clip:function(a){a.animate({top:parseInt(a.css("top"),10)+a.height()/2,height:0},this.config.duration,this.config.easing)},slide:function(a){a.animate({top:-a.height()},this.config.duration,this.config.easing)},drop:function(a){a.animate({left:-a.width(),opacity:0},this.config.duration,this.config.easing)},hide:function(a){a.hide()}},g.defineEffect=function(a,b){this.switchHandlers[a]=b},g.ImageList=function(a){this.images=a,this.createImagesBySequence(),this.preload()},a.extend(g.ImageList.prototype,{isSequenceable:function(){return"string"==typeof this.images[0]&&"number"==typeof this.images[1]&&"number"==typeof this.images[2]},createImagesBySequence:function(){if(this.isSequenceable()){var a=[],b=this.images[0],c=this.images[1],d=this.images[2];do a.push(b.replace(/\.\w+$/,c+"$&"));while(++c<=d);this.images=a}},preload:function(){for(var a,c=this.images.length,d=0;d<c;d++)a=this.images[d],b[a]||(b[a]=new Image,b[a].src=a)},shuffle:function(){var a,b,c=this.images.length,d=this.images.join();if(c){for(;c;)a=Math.floor(Math.random()*c),b=this.images[--c],this.images[c]=this.images[a],this.images[a]=b;this.images.join()===d&&this.shuffle()}},get:function(a){return this.images[a]},url:function(a){return"url("+this.get(a)+")"},count:function(){return this.images.length}}),a.BgSwitcher=g}(jQuery);



var height_loop = ()=>{
  setTimeout(()=>{
    $('#all').css({'min-height': $(window).height()});
    height_loop();
  } ,200)
}
  
$(()=>{
  $('#all').css({'min-height': $(window).height()})
  height_loop();
  var images = JSON.parse($('#images').text());
  if(images.length > 0){
    if(images.length == 1){
      images = [images[0], images[0]]
    }
    $('body').bgSwitcher({images: images, interval: 5000})
  }
  $('#main').css({'color': $('#font_color').text()});
});
